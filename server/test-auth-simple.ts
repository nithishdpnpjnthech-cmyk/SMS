// Simple Authentication Test\n// Tests the core authentication functionality\n\nimport { storage } from './storage';\nimport {\n  generateDefaultPassword,\n  hashPassword,\n  verifyPassword,\n  authenticateStudent\n} from './student-auth-fix';\n\nasync function testAuthentication() {\n  console.log('ðŸ§ª Testing Student Authentication...');\n  \n  try {\n    // Test 1: Password Generation\n    console.log('\\n1. Testing password generation...');\n    const password1 = generateDefaultPassword('kamakshi');\n    console.log(`   kamakshi -> ${password1}`);\n    \n    const password2 = generateDefaultPassword('Ramesh Kumar');\n    console.log(`   Ramesh Kumar -> ${password2}`);\n    \n    // Test 2: Password Hashing\n    console.log('\\n2. Testing password hashing...');\n    const plainPassword = 'kamak';\n    const hashedPassword = await hashPassword(plainPassword);\n    console.log(`   Plain: ${plainPassword}`);\n    console.log(`   Hash: ${hashedPassword.substring(0, 20)}...`);\n    \n    // Test 3: Password Verification\n    console.log('\\n3. Testing password verification...');\n    const isValid = await verifyPassword(plainPassword, hashedPassword);\n    console.log(`   Correct password: ${isValid}`);\n    \n    const isInvalid = await verifyPassword('wrong', hashedPassword);\n    console.log(`   Wrong password: ${isInvalid}`);\n    \n    // Test 4: Real Student Authentication\n    console.log('\\n4. Testing real student authentication...');\n    \n    // Get an existing student\n    const students = await storage.query(`\n      SELECT id, name, email, phone \n      FROM students \n      WHERE status = 'active' \n      AND password_hash IS NOT NULL \n      LIMIT 1\n    `);\n    \n    if (students.length > 0) {\n      const student = students[0];\n      const expectedPassword = generateDefaultPassword(student.name);\n      \n      console.log(`   Testing student: ${student.name}`);\n      console.log(`   Expected password: ${expectedPassword}`);\n      \n      try {\n        const result = await authenticateStudent(storage, student.id, expectedPassword);\n        console.log(`   âœ… Authentication successful: ${result.name}`);\n      } catch (error: any) {\n        console.log(`   âŒ Authentication failed: ${error.message}`);\n      }\n      \n      // Test wrong password\n      try {\n        await authenticateStudent(storage, student.id, 'wrongpassword');\n        console.log(`   âŒ Wrong password should have failed`);\n      } catch (error: any) {\n        console.log(`   âœ… Wrong password correctly rejected: ${error.message}`);\n      }\n    } else {\n      console.log('   No students found for testing');\n    }\n    \n    console.log('\\nðŸŽ‰ Authentication tests completed!');\n    \n  } catch (error) {\n    console.error('âŒ Test failed:', error);\n  }\n}\n\n// Run the test\ntestAuthentication()\n  .then(() => {\n    console.log('\\nTest completed successfully');\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error('Test failed:', error);\n    process.exit(1);\n  });